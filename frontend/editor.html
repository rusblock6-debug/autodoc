<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoDoc AI — Как оформить заказ v1.2</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="notion-style editor-page">
    <!-- Top Bar -->
    <header class="notion-topbar notion-topbar-editor">
        <div class="topbar-left">
            <a href="index.html" class="notion-back-btn">
                <i class="fas fa-arrow-left"></i>
            </a>
            <div class="notion-breadcrumb">
                <i class="fas fa-file-alt"></i>
                <span>Мои гайды</span>
                <i class="fas fa-chevron-right"></i>
                <span>Как оформить заказ v1.2</span>
            </div>
        </div>
        <div class="topbar-right">
            <button class="notion-btn notion-btn-secondary" id="saveDraftBtn">
                <i class="fas fa-save"></i>
                <span>Сохранено</span>
            </button>
            <button class="notion-btn notion-btn-secondary" id="previewBtn">
                <i class="fas fa-eye"></i>
                <span>Предпросмотр</span>
            </button>
            <div class="notion-dropdown">
                <button class="notion-btn notion-btn-primary" id="exportBtn">
                    <i class="fas fa-download"></i>
                    <span>Экспорт</span>
                    <i class="fas fa-caret-down"></i>
                </button>
                <div class="notion-dropdown-menu" id="exportDropdown" style="display: none;">
                    <a href="#" onclick="exportGuide('markdown')">
                        <i class="fab fa-markdown"></i>
                        Markdown
                    </a>
                    <a href="#" onclick="exportGuide('html')">
                        <i class="fas fa-code"></i>
                        HTML
                    </a>
                    <a href="#" onclick="exportGuide('pdf')">
                        <i class="fas fa-file-pdf"></i>
                        PDF
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Editor -->
    <div class="notion-editor-container">
        <!-- Left Panel - Canvas -->
        <div class="notion-editor-main">
            <!-- Document Title -->
            <div class="notion-doc-header">
                <input type="text" class="notion-title-input" value="Как оформить заказ v1.2" id="guideTitle">
            </div>

            <!-- Canvas Area -->
            <div class="notion-canvas">
                <div class="notion-canvas-header">
                    <div class="step-indicator">
                        <span class="step-number">Шаг <strong id="currentStepNum">1</strong></span>
                        <span class="step-total">из <span id="totalSteps">5</span></span>
                    </div>
                    <p class="step-hint">Перетащите маркер на нужный элемент</p>
                </div>

                <div class="notion-canvas-wrapper" id="canvasWrapper">
                    <div class="notion-screenshot-container" id="screenshotContainer">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3Crect fill='%23FAFAF9' width='800' height='500'/%3E%3Crect x='20' y='20' width='760' height='36' rx='4' fill='%23E7E5E4'/%3E%3Ccircle cx='44' cy='38' r='10' fill='%23EF4444'/%3E%3Ccircle cx='68' cy='38' r='10' fill='%23F59E0B'/%3E%3Ccircle cx='92' cy='38' r='10' fill='%2322C55E'/%3E%3Crect x='140' y='28' width='180' height='20' rx='4' fill='%23D6D3D1'/%3E%3Crect x='25' y='76' width='280' height='380' rx='6' fill='%23FFFFFF' stroke='%23E7E5E4'/%3E%3Ctext x='45' y='106' font-family='Inter' font-size='14' fill='%23737373'%3EEmail%3C/text%3E%3Crect x='45' y='116' width='240' height='32' rx='4' fill='%23F5F5F4' stroke='%23E5E5E5'/%3E%3Ctext x='45' y='176' font-family='Inter' font-size='14' fill='%23737373'%3EПароль%3C/text%3E%3Crect x='45' y='186' width='240' height='32' rx='4' fill='%23F5F5F4' stroke='%23E5E5E5'/%3E%3Crect x='45' y='246' width='240' height='36' rx='4' fill='%2337352F'/%3E%3Ctext x='165' y='270' font-family='Inter' font-size='13' fill='white' font-weight='500'%3EВойти%3C/text%3E%3Crect x='395' y='76' width='380' height='380' rx='6' fill='%23FFFFFF' stroke='%23E7E5E4'/%3E%3Crect x='415' y='96' width='90' height='28' rx='4' fill='%2337352F'/%3E%3Crect x='415' y='146' width='340' height='22' rx='3' fill='%23E7E5E4'/%3E%3Crect x='415' y='186' width='280' height='22' rx='3' fill='%23E7E5E4'/%3E%3Crect x='415' y='226' width='200' height='22' rx='3' fill='%23E7E5E4'/%3E%3Crect x='415' y='346' width='340' height='44' rx='4' fill='%2322C55E'/%3E%3Ctext x='515' y='378' font-family='Inter' font-size='13' fill='white' font-weight='500'%3EОформить заказ%3C/text%3E%3C/svg%3E" alt="Screenshot" class="notion-screenshot-img" id="screenshotImg">

                        <!-- Draggable Marker -->
                        <div class="notion-marker" id="marker" style="left: 68%; top: 55%;">
                            <span class="marker-number">1</span>
                            <div class="marker-ring"></div>
                        </div>
                    </div>
                </div>

                <!-- Tools -->
                <div class="notion-canvas-tools">
                    <button class="notion-tool-btn" title="Увеличить" id="zoomInBtn">
                        <i class="fas fa-search-plus"></i>
                    </button>
                    <button class="notion-tool-btn" title="Уменьшить" id="zoomOutBtn">
                        <i class="fas fa-search-minus"></i>
                    </button>
                    <button class="notion-tool-btn" title="Размыть область" id="blurBtn">
                        <i class="fas fa-eye-slash"></i>
                    </button>
                    <button class="notion-tool-btn" title="Нарисовать стрелку" id="arrowBtn">
                        <i class="fas fa-long-arrow-alt-right"></i>
                    </button>
                </div>

                <!-- Instruction -->
                <div class="notion-instruction-block">
                    <div class="notion-block-header">
                        <i class="fas fa-align-left"></i>
                        <span>Инструкция</span>
                    </div>
                    <textarea class="notion-textarea" id="instructionText" rows="3">Нажмите на поле «Email» и введите ваш адрес электронной почты. Убедитесь, что формат email корректный (например: user@example.com).</textarea>
                    <div class="notion-block-footer">
                        <i class="fas fa-info-circle"></i>
                        <span>Исходный текст: «ну, сначала вводишь email в это поле...»</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Panel - Steps -->
        <aside class="notion-steps-sidebar">
            <div class="notion-sidebar-header">
                <h3>Шаги</h3>
                <button class="notion-btn-icon-sm" id="addStepBtn" title="Добавить шаг">
                    <i class="fas fa-plus"></i>
                </button>
            </div>

            <div class="notion-steps-list" id="stepsList">
                <!-- Step 1 -->
                <div class="notion-step-item active" data-step="1">
                    <div class="notion-step-thumb">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 80'%3E%3Crect fill='%23FAFAF9' width='120' height='80'/%3E%3Crect x='8' y='8' width='104' height='12' rx='2' fill='%23E7E5E4'/%3E%3Crect x='8' y='28' width='50' height='20' rx='2' fill='%23F5F5F4'/%3E%3Ccircle cx='20' cy='38' r='8' fill='%2337352F'/%3E%3Crect x='8' y='56' width='70' height='10' rx='2' fill='%23E7E5E4'/%3E%3C/svg%3E" alt="Шаг 1">
                        <span class="step-num">1</span>
                    </div>
                    <div class="notion-step-content">
                        <p>Нажмите на поле «Email» и введите ваш адрес электронной почты</p>
                        <div class="notion-step-actions">
                            <button class="notion-btn-icon-sm" title="Редактировать">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="notion-btn-icon-sm" title="Дублировать">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <button class="notion-btn-icon-sm step-menu-toggle" onclick="toggleStepMenu(this)">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <div class="notion-step-menu" style="display: none;">
                        <a href="#"><i class="fas fa-link"></i> Связать со следующим</a>
                        <a href="#" class="danger"><i class="fas fa-trash"></i> Удалить</a>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="notion-step-item" data-step="2">
                    <div class="notion-step-thumb">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 80'%3E%3Crect fill='%23FAFAF9' width='120' height='80'/%3E%3Crect x='8' y='8' width='104' height='12' rx='2' fill='%23E7E5E4'/%3E%3Crect x='8' y='28' width='50' height='20' rx='2' fill='%23F5F5F4'/%3E%3Crect x='8' y='56' width='70' height='10' rx='2' fill='%23E7E5E4'/%3E%3C/svg%3E" alt="Шаг 2">
                        <span class="step-num">2</span>
                    </div>
                    <div class="notion-step-content">
                        <p>Введите пароль от вашего аккаунта в соответствующее поле</p>
                    </div>
                    <button class="notion-btn-icon-sm step-menu-toggle" onclick="toggleStepMenu(this)">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <div class="notion-step-menu" style="display: none;">
                        <a href="#"><i class="fas fa-link"></i> Связать со следующим</a>
                        <a href="#" class="danger"><i class="fas fa-trash"></i> Удалить</a>
                    </div>
                </div>

                <!-- Step 3 -->
                <div class="notion-step-item" data-step="3">
                    <div class="notion-step-thumb">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 80'%3E%3Crect fill='%23FAFAF9' width='120' height='80'/%3E%3Crect x='8' y='8' width='104' height='12' rx='2' fill='%23E7E5E4'/%3E%3Crect x='8' y='28' width='60' height='24' rx='3' fill='%2337352F'/%3E%3Crect x='8' y='56' width='70' height='10' rx='2' fill='%23E7E5E4'/%3E%3C/svg%3E" alt="Шаг 3">
                        <span class="step-num">3</span>
                    </div>
                    <div class="notion-step-content">
                        <p>Нажмите кнопку «Войти» для авторизации в системе</p>
                    </div>
                    <button class="notion-btn-icon-sm step-menu-toggle" onclick="toggleStepMenu(this)">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <div class="notion-step-menu" style="display: none;">
                        <a href="#"><i class="fas fa-link"></i> Связать со следующим</a>
                        <a href="#" class="danger"><i class="fas fa-trash"></i> Удалить</a>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="notion-step-item" data-step="4">
                    <div class="notion-step-thumb">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 80'%3E%3Crect fill='%23FAFAF9' width='120' height='80'/%3E%3Crect x='8' y='8' width='50' height='14' rx='2' fill='%2337352F'/%3E%3Crect x='8' y='28' width='104' height='10' rx='2' fill='%23E7E5E4'/%3E%3Crect x='8' y='42' width='90' height='10' rx='2' fill='%23E7E5E4'/%3E%3Crect x='8' y='56' width='104' height='14' rx='2' fill='%2322C55E'/%3E%3C/svg%3E" alt="Шаг 4">
                        <span class="step-num">4</span>
                    </div>
                    <div class="notion-step-content">
                        <p>Выберите способ оплаты и подтвердите заказ</p>
                    </div>
                    <button class="notion-btn-icon-sm step-menu-toggle" onclick="toggleStepMenu(this)">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <div class="notion-step-menu" style="display: none;">
                        <a href="#"><i class="fas fa-link"></i> Связать со следующим</a>
                        <a href="#" class="danger"><i class="fas fa-trash"></i> Удалить</a>
                    </div>
                </div>

                <!-- Step 5 -->
                <div class="notion-step-item" data-step="5">
                    <div class="notion-step-thumb">
                        <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 80'%3E%3Crect fill='%23FAFAF9' width='120' height='80'/%3E%3Crect x='35' y='25' width='50' height='35' rx='4' fill='%2322C55E' opacity='0.2'/%3E%3Ctext x='60' y='48' font-family='Inter' font-size='10' fill='%2322C55E' text-anchor='middle'%3E✓%3C/text%3E%3C/svg%3E" alt="Шаг 5">
                        <span class="step-num">5</span>
                    </div>
                    <div class="notion-step-content">
                        <p>Заказ успешно оформлен! Проверьте почту для подтверждения</p>
                    </div>
                    <button class="notion-btn-icon-sm step-menu-toggle" onclick="toggleStepMenu(this)">
                        <i class="fas fa-ellipsis-h"></i>
                    </button>
                    <div class="notion-step-menu" style="display: none;">
                        <a href="#"><i class="fas fa-link"></i> Связать со следующим</a>
                        <a href="#" class="danger"><i class="fas fa-trash"></i> Удалить</a>
                    </div>
                </div>
            </div>

            <!-- Footer Actions -->
            <div class="notion-sidebar-footer">
                <button class="notion-btn notion-btn-secondary notion-btn-block" id="ttsBtn">
                    <i class="fas fa-volume-up"></i>
                    <span>Озвучить шаги</span>
                </button>
                <button class="notion-btn notion-btn-secondary notion-btn-block" id="createShortsBtn">
                    <i class="fas fa-video"></i>
                    <span>Создать шортс</span>
                </button>
            </div>
        </aside>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="notion-modal-overlay" style="display: none;">
        <div class="notion-modal notion-modal-large">
            <div class="notion-modal-header">
                <h2>Предпросмотр гайда</h2>
                <button class="notion-icon-btn" onclick="closePreviewModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="notion-modal-body">
                <div class="notion-preview-content">
                    <!-- Step 1 -->
                    <div class="notion-preview-step">
                        <h3>Шаг 1. Нажмите на поле «Email»</h3>
                        <div class="notion-preview-image">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3Crect fill='%23FAFAF9' width='800' height='500'/%3E%3Crect x='20' y='20' width='760' height='36' rx='4' fill='%23E7E5E4'/%3E%3Ccircle cx='44' cy='38' r='10' fill='%23EF4444'/%3E%3Ccircle cx='68' cy='38' r='10' fill='%23F59E0B'/%3E%3Ccircle cx='92' cy='38' r='10' fill='%2322C55E'/%3E%3Crect x='45' y='116' width='240' height='32' rx='4' fill='%23F5F5F4' stroke='%23E5E5E5'/%3E%3Ccircle cx='165' cy='132' r='24' fill='%2337352F'/%3E%3Ccircle cx='165' cy='132' r='32' fill='none' stroke='%2337352F' stroke-width='2' opacity='0.3'/%3E%3C/svg%3E" alt="Шаг 1">
                        </div>
                        <p>Нажмите на поле «Email» и введите ваш адрес электронной почты</p>
                    </div>
                    <hr class="notion-divider">
                    <!-- Step 2 -->
                    <div class="notion-preview-step">
                        <h3>Шаг 2. Введите пароль</h3>
                        <div class="notion-preview-image">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 800 500'%3E%3Crect fill='%23FAFAF9' width='800' height='500'/%3E%3Crect x='45' y='186' width='240' height='32' rx='4' fill='%23F5F5F4' stroke='%23E5E5E5'/%3E%3Ccircle cx='165' cy='202' r='24' fill='%2337352F'/%3E%3Ccircle cx='165' cy='202' r='32' fill='none' stroke='%2337352F' stroke-width='2' opacity='0.3'/%3E%3C/svg%3E" alt="Шаг 2">
                        </div>
                        <p>Введите пароль от вашего аккаунта в соответствующее поле</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Shorts Modal -->
    <div id="shortsModal" class="notion-modal-overlay" style="display: none;">
        <div class="notion-modal">
            <div class="notion-modal-header">
                <h2>Создание видео-гайда</h2>
                <button class="notion-icon-btn" onclick="closeShortsModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="notion-modal-body">
                <div class="notion-short-preview">
                    <div class="notion-slideshow">
                        <div class="slide active">
                            <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 700'%3E%3Crect fill='%23FAFAF9' width='400' height='700'/%3E%3Crect x='20' y='20' width='360' height='28' rx='4' fill='%23E7E5E4'/%3E%3Crect x='40' y='100' width='320' height='44' rx='4' fill='%2337352F'/%3E%3Ctext x='200' y='130' font-family='Inter' font-size='14' fill='white' text-anchor='middle' font-weight='500'%3EШаг 1: Email%3C/text%3E%3C/svg%3E" alt="Слайд 1">
                            <span class="slide-counter">1 / 5</span>
                        </div>
                    </div>
                </div>
                <div class="notion-progress">
                    <div class="progress-track">
                        <div class="progress-fill" style="width: 20%"></div>
                    </div>
                    <p>Генерация видео: 20%</p>
                </div>
                <div class="notion-modal-actions">
                    <button class="notion-btn notion-btn-secondary" onclick="closeShortsModal()">
                        Отмена
                    </button>
                    <button class="notion-btn notion-btn-primary">
                        <i class="fas fa-download"></i>
                        Скачать ZIP
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/editor.js"></script>
</body>
</html>
