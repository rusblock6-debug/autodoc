# –†–µ–∑—é–º–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. **–î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ Development Dockerfile**
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω **FFmpeg** (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ)
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è OpenCV: `libsm6`, `libxext6`, `libxrender1`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: `libglib2.0-0`, `libgomp1`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `curl` –¥–ª—è healthcheck

### 2. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–Ω—Ñ–ª–∏–∫—Ç llama-cpp-python**
- ‚úÖ –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –≤ `requirements.txt` —Å –ø–æ—è—Å–Ω–µ–Ω–∏–µ–º
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ Dockerfile —Å CUDA –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π

### 3. **–£–ª—É—á—à–µ–Ω healthcheck –≤ Dockerfile**
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω Python one-liner –Ω–∞ `curl` (–±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω `start-period` –¥–æ 40 —Å–µ–∫—É–Ω–¥ (–¥–∞–µ—Ç –≤—Ä–µ–º—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `curl` –≤ production stage

### 4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω healthcheck –¥–ª—è MinIO**
- ‚úÖ –£–¥–∞–ª–µ–Ω –ø—Ä–æ–±–ª–µ–º–Ω—ã–π healthcheck (MinIO —Å—Ç–∞–±–∏–ª–µ–Ω, –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `depends_on`)

### 5. **–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è celery-worker**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `MINIO_ACCESS_KEY` –∏ `MINIO_SECRET_KEY`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `DEBUG=true` –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏

### 6. **–°–æ–∑–¥–∞–Ω .dockerignore**
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã –Ω–µ–Ω—É–∂–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–±–æ—Ä–∫–∏
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞ –∏ —É—Å–∫–æ—Ä–µ–Ω–∞ —Å–±–æ—Ä–∫–∞

## üìã –ß—Ç–æ —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å

1. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤–∏–¥–µ–æ (FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
2. ‚úÖ OpenCV –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã)
3. ‚úÖ –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ llama-cpp-python
4. ‚úÖ Celery worker —Å–º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ MinIO
5. ‚úÖ Healthcheck —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
6. ‚úÖ –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –±—ã—Å—Ç—Ä–µ–µ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç:

```bash
docker-compose up --build
```

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤ (8000, 5432, 6379, 9000, 9001)
- –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `docker-compose logs`
- –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: `docker-compose ps`

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **Production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**: –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `target: production` –≤ docker-compose.yml, –Ω–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç NVIDIA Docker runtime –∏ GPU
- **GPU –ø–æ–¥–¥–µ—Ä–∂–∫–∞**: Production –æ–±—Ä–∞–∑ —Ç—Ä–µ–±—É–µ—Ç CUDA 12.2 –∏ nvidia-docker
- **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞**: Development –æ–±—Ä–∞–∑ —Ç–µ–ø–µ—Ä—å –±–æ–ª—å—à–µ –∏–∑-–∑–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –Ω–æ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
